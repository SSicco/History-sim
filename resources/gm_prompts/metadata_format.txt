METADATA FORMAT REFERENCE
========================

Every GM response MUST end with a JSON metadata block in ```json``` fences.
The application strips this block before displaying the narrative.

Required fields:

{
  "scene_characters": ["character_id_1", "character_id_2"],
  "location": "City, Specific Place",
  "date": "YYYY-MM-DD",
  "awaiting_roll": false,
  "roll_type": null,
  "summary_update": "One or two sentence summary of what happened.",
  "dialogue": [
    {"speaker": "character_id", "type": "speech"}
  ],
  "juan_acted": false,
  "confidence": 1.0,
  "missing_context": []
}

Field details:
- scene_characters: All character IDs currently in the scene (lowercase, underscored)
- location: Current location as "City, Specific Place"
- date: Current in-game date in ISO format
- awaiting_roll: Set to true when you present a d100 table
- roll_type: "persuasion", "chaos", or null
- summary_update: REQUIRED. 1-2 sentence summary of this exchange. Used for the
  event log and reflection index. NEVER leave this empty.
- dialogue: Which characters spoke or acted in this response
- juan_acted: MUST always be false (self-check against Rule 3 violation)
- confidence: 0.0 to 1.0 â€” how confident you are in your response given context
- missing_context: Array of context gaps (see layer1_gm_guidelines.txt for format)
